:root{
	--bg:#0f1113;
	--surface:#1a1d20;
	--muted:#9aa0a6;
	--accent:#7c4dff;
	--danger:#ff6b6b;
	--radius:12px;
}
*{box-sizing:border-box}
html,body,#root{height:100%}
body{
	margin:0;
	font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
	background:var(--bg);
	color:#e6eef4;
	-webkit-font-smoothing:antialiased;
	-moz-osx-font-smoothing:grayscale;
	padding:12px;
}

.app{max-width:980px;margin:0 auto}
.topbar{
	display:flex;align-items:center;justify-content:space-between;
	margin-bottom:10px;
}
.topbar h1{font-size:1.2rem;margin:0}
.icon-btn{
	background:var(--surface);color:inherit;border:none;padding:8px 12px;border-radius:10px;font-size:1.1rem;
}
.icon-btn:hover{background:rgba(124,77,255,0.15)}

.categories{
	display:flex;gap:8px;overflow-x:auto;padding:8px 2px;margin-bottom:6px;
}
.cat{
	background:var(--surface);padding:8px 12px;border-radius:999px;white-space:nowrap;cursor:pointer;font-size:0.95rem;
}
.cat.active{background:var(--accent);color:#061219;font-weight:600}

.main{background:transparent;padding-bottom:60px}
.tasks-header{display:flex;align-items:center;justify-content:space-between;margin:8px 0}
.tasks-header-left {
	display:flex;
	align-items:center;
	gap:8px;
	/* ensure items stay on same row and don't wrap */
	flex-wrap:nowrap;
}
/* make the heading inline so the controls stay on the same line */
.tasks-header-left h2{
	display:inline-flex;
	align-items:center;
	gap:8px;
	margin:0;
}
.tasks-header h2{font-size:1rem;margin:0;color:#cfe7ff}
.task-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}

.task{
	background:var(--surface);padding:12px;border-radius:12px;display:flex;gap:10px;align-items:flex-start;
}
.task .left{flex:0 0 auto}
.task .body{flex:1}
.task .title{font-weight:600;margin-bottom:6px}
.task .meta{font-size:0.85rem;color:var(--muted);margin-top:8px}
.task .actions{display:flex;gap:8px;margin-left:8px}

.small-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:6px;border-radius:8px;color:var(--muted)}
.small-btn:hover{border-color:rgba(124,77,255,0.25);color:var(--accent)}

/* modal common */
.modal{position:fixed;inset:0;display:flex;align-items:flex-end;justify-content:center;padding:12px;backdrop-filter:blur(6px);z-index:10000}
.modal.hidden{display:none}
.modal-sheet{width:100%;max-width:680px;background:var(--surface);border-radius:12px;padding:14px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
.modal-sheet h3{margin:0 0 8px 0}
.modal-sheet input, .modal-sheet textarea{
	width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.02);color:inherit
}
.modal-actions{display:flex;justify-content:flex-end;gap:8px}
.modal-actions button{padding:8px 12px;border-radius:8px;border:none;background:rgba(255,255,255,0.03);color:var(--muted)}
.modal-actions button:hover{background:rgba(124,77,255,0.12);color:var(--accent)}

/* markdown output tweaks */
.task .desc{margin-top:6px;color:#dbefff}
.task .desc ul{padding-left:18px}
.task .desc li{margin:2px 0}
.task .desc input[type="checkbox"]{transform:scale(1.05);margin-right:8px}

/* footer */
.footer{position:fixed;left:12px;right:12px;bottom:12px;text-align:center;color:var(--muted);font-size:0.85rem}

/* Agrandir et customiser la case à cocher dans la liste de tâches */
.task .left {
	/* centre la checkbox verticalement */
	display: flex;
	align-items: center;
}

/* custom checkbox */
.task .left input[type="checkbox"]{
	-webkit-appearance: none;
	appearance: none;
	width: 24px;
	height: 24px;
	border-radius: 6px;
	border: 1px solid rgba(255,255,255,0.06);
	background: rgba(255,255,255,0.02);
	cursor: pointer;
	display: inline-block;
	vertical-align: middle;
	transition: background 0.18s ease, transform 0.12s ease, border-color 0.12s ease;
	box-shadow: none;
}

/* hover and focus feedback */
.task .left input[type="checkbox"]:hover {
	transform: scale(1.05);
}
.task .left input[type="checkbox"]:focus {
	outline: 3px solid rgba(56,176,0,0.14); /* use greenish focus ring */
	outline-offset: 2px;
}

/* checked state: green background (use --accent) with a white tick SVG centered */
.task .left input[type="checkbox"]:checked{
	background: var(--accent);
	border: none;
	background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M20.285 6.709a1 1 0 0 0-1.414-1.418l-9.193 9.2-4.192-4.192a1 1 0 1 0-1.414 1.414l4.899 4.9a1 1 0 0 0 1.414 0l9.593-9.906z'/></svg>");
	background-repeat: no-repeat;
	background-position: center;
	background-size: 60%;
}

/* keep small checkboxes inside markdown descriptions unaffected */
/* replaced with a more explicit style so inserted checkboxes look small and show a white tick on green */
.task .desc input[type="checkbox"]{
	-webkit-appearance: none;
	appearance: none;
	width: 16px;
	height: 16px;
	border-radius: 4px;
	border: 1px solid rgba(255,255,255,0.06);
	background: rgba(255,255,255,0.02);
	vertical-align: middle;
	display: inline-block;
	margin-right: 8px;
	box-shadow: none;
	cursor: pointer;
}

/* checked state for inline markdown checkboxes: green background + white tick (small SVG) */
.task .desc input[type="checkbox"]:checked{
	background: var(--accent);
	border: none;
	background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M20.285 6.709a1 1 0 0 0-1.414-1.418l-9.193 9.2-4.192-4.192a1 1 0 1 0-1.414 1.414l4.899 4.9a1 1 0 0 0 1.414 0l9.593-9.906z'/></svg>");
	background-repeat: no-repeat;
	background-position: center;
    background-size: 60%;
}

.topbar .back-link{
	display:inline-flex;
	align-items:center;
	gap:8px;
	color:var(--muted);
	text-decoration:none;
	padding:6px 8px;
	border-radius:8px;
	margin-right:8px;
	font-size:0.95rem;
}
.topbar .back-link:hover{
	color:var(--accent);
	background:rgba(255,255,255,0.02);
}

.topbar-actions {
	display: flex;
	gap: 8px;
	align-items: center;
}

/* Plus petit que le + mais même style */
.topbar-actions .icon-btn {
	font-size: 1rem;
	padding: 8px;
}

/* Board categories layout: inline / horizontal cards */
.board-categories .categories-grid{
	display:flex;
	flex-direction:row;
	gap:12px;
	align-items:flex-start;
	flex-wrap:wrap;
}

/* Category card: fond, padding, bord arrondi pour délimiter, taille fixe */
.board-categories .category-card{
	background: var(--surface);
	padding:12px 14px;
	border-radius:10px;
	width:220px;         /* largeur fixe */
	min-width:220px;
	max-width:220px;
	box-shadow: 0 6px 18px rgba(0,0,0,0.45);
	position:relative;
	cursor:default;
	display:flex;
	flex-direction:column;
	gap:6px;
	flex-shrink:0;       /* empêche le rétrécissement */
}

/* Title inside category */
.board-categories .category-card .category-title{
	font-weight:600;
	color:var(--text, #e6eef4);
	font-size:1rem;
}

/* Remove count display (if present) visually */
.board-categories .category-card .category-count{ display:none; }

/* "..." menu button style: background same as page bg and white text */
.board-categories .category-card .cat-menu{
	position:absolute;
	top:8px;
	right:8px;
	background: var(--bg);
	color: #ffffff;
	border: none;
	padding:6px 8px;
	border-radius:8px;
	cursor:pointer;
	font-size:1rem;
	opacity:0.95;
}

/* Hover state for menu */
.board-categories .category-card .cat-menu:hover{
	opacity:1;
	box-shadow: 0 6px 14px rgba(0,0,0,0.5);
}

/* Tasks inside category card */
.board-categories .category-card .tasks-list{
	display:flex;
	flex-direction:column;
	gap:8px;
	margin-top:8px;
}
.board-categories .category-card .task-item{
	background: rgba(255,255,255,0.02);
	padding:8px 10px;
	border-radius:8px;
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap:8px;
	cursor:grab;
	border:1px solid rgba(255,255,255,0.02);
}
.board-categories .category-card .task-item:active{ cursor:grabbing; }
.board-categories .category-card .task-item .left{
	display:flex;align-items:center;gap:10px;
}
.board-categories .category-card .task-item .title{
	font-weight:600;color:var(--text, #e6eef4);
}
.board-categories .category-card .task-item .actions{
	display:flex;gap:6px;align-items:center;
}
.board-categories .category-card .task-item .actions button{
	background:transparent;border:none;color:var(--muted);padding:6px;border-radius:6px;cursor:pointer;
}
.board-categories .category-card.drag-over{
	outline:2px dashed rgba(255,255,255,0.04);
	box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

/* small add-task button inside category */
.category-card .add-task-btn{
	margin-top:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px;color:var(--muted);cursor:pointer;
}
.category-card .add-task-btn:hover{background:rgba(255,255,255,0.02);color:var(--accent);}

/* Fond sombre pour la description dans le modal de détails */
#modal-task-details-board #task-details-desc-board {
	background: #15181b;
	border-radius: 8px;
	padding: 12px;
	color: #dbefff;
	white-space: pre-line;
	margin-bottom: 8px;
}

/* Liste à puce markdown dans la description : réduit l'espace vertical */
#modal-task-details-board #task-details-desc-board ul {
	padding-left: 18px;
	margin: 2px 0;
}
#modal-task-details-board #task-details-desc-board li {
	margin: 0;
}

/* Case à cocher des tâches dans les catégories : plus grosse et fond vert si cochée */
.board-categories .category-card .task-item .task-complete-toggle {
	-webkit-appearance: none;
	appearance: none;
	width: 32px;
	height: 32px;
	border-radius: 8px;
	border: 2px solid rgba(255,255,255,0.10);
	background: rgba(255,255,255,0.04);
	cursor: pointer;
	vertical-align: middle;
	transition: background 0.18s, border-color 0.12s;
	margin-right: 10px;
}

.board-categories .category-card .task-item .task-complete-toggle:checked {
	background: var(--accent);
	border: 2px solid var(--accent);
	background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='white' d='M20.285 6.709a1 1 0 0 0-1.414-1.418l-9.193 9.2-4.192-4.192a1 1 0 1 0-1.414 1.414l4.899 4.9a1 1 0 0 0 1.414 0l9.593-9.906z'/></svg>");
	background-repeat: no-repeat;
	background-position: center;
	background-size: 60%;
}

/* Responsive: ensure good spacing on small screens */
@media(max-width:600px){
	.board-categories .category-card{ min-width:100%; }
	.board-categories .categories-grid{
		overflow-x:auto;
	}
	.board-categories .category-card{
		width:220px;
		min-width:220px;
		max-width:220px;
	}
}

/* Centrer le modal de détails de tâche */
#modal-task-details-board.modal {
	align-items: center !important;
	justify-content: center !important;
}

/* Optionnel : rien à ajouter, le style modal-sheet est déjà utilisé pour tous les modals */